@page "/"

@inherits ProductBase



@if (Products == null)
    {
        <h3>Loading products...</h3>
    }
    else
    {
        <h3 class="mb-5">Products</h3>
        var productCount = Products.Count();



        @if(productCount > 0)
         {
                    //var groupedProductsByCategory = from product in Products
                      //                              group product by product.CategoryID into prodByCatGroup
                        //                            orderby prodByCatGroup.Key
                          //                          select prodByCatGroup; 




              //const int itemPerRow = 4;
              //var productRowList = new List<ProductDto>(); 
              // @for (int i = 0; i<productCount; i++)
                //{
                // productRowList = Products.Skip(i * itemPerRow).Take(itemPerRow).ToList();

                    <div class="row mt-3">


                    <h4> GetCategoryName(prodGroup)</h4>


                     @foreach(var prodGroup in GetGroupedProductsByCategory())
                       {
                        <DisplayProducts Products= "@prodGroup.Take(4)"></DisplayProducts>
                        
                       }

                    </div>
                      <hr class="mb-3"/>
                  
              

        }
    }